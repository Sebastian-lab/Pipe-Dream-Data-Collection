services:
  weather-collector:
    build: .
    image: pipe-dream-data-collection:v1.0
    container_name: weather-collector
    ports:
      - "80:8000"
    environment:
      - MONGO_URI=${MONGO_URI}
      - DB_NAME=${DB_NAME:-weather_db}
      - OPEN_METEO_URL=${OPEN_METEO_URL:-https://api.open-meteo.com/v1/forecast}
      - REFRESH_INTERVAL_MINUTES=${REFRESH_INTERVAL_MINUTES:-1}
    volumes:
      - ./historical_data:/app/historical_data
